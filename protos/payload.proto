syntax = "proto2";

package payload;

message packet {
  required fixed64 time_stamp = 1;

  enum MessageTypes {
      PEER_INFO = 0; 
      ADVERTISE = 1; 
  }

  message Payload {
      required MessageTypes type = 1 [default = PEER_INFO];
      optional PeerInfo peerInfo = 2;
      optional Crypto crypto = 3; 
  }

  message PeerInfo {
      required string ipAddress = 1; 
      required uint32 port = 2; 
      required string userName = 3; 
  }

  message Crypto {
      required string clientKey = 1; 
      required bytes hashedKey = 2; 
      required bytes encryptedHashedKey = 3; 
      required bytes encryptedMsg = 4;  
  }

  required Payload payload = 2; 

}